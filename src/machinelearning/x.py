#!/usr/bin/env python
from treelib import Node, Tree

luposdate = [
    1, 1, 1, 1, -1, -2, 0, 2, 122, -4, 3, 0, 2, 0, -6, -7, -5, -8, -3, -9, 2, 0, 3, 0, -11, -12, 2, 0, 3, 0, -14, -15, -13, -16, 2, 0, 2, 0, -18, -19, 2, 0, 3, 0, -21, -22, -20, -23, -17, -24, -10, -25, 3, 0, 3, 0, -27, -28, 2, 0, 2, 0, -30, -31, -29, -32, 3, 0, 2, 0, -34, -35, 3, 0, 3, 0, -37, -38,
    -36, -39, -33, -40, 2, 0, 3, 0, -42, -43, 3, 0, 3, 0, -45, -46, -44, -47, 2, 0, 3, 0, -49, -50, 2, 0, 2, 0, -52, -53, -51, -54, -48, -55, -41, -56, -26, -57, 3, 0, 3, 0, -59, -60, 2, 0, 3, 2, -62, -63, -61, -64, 3, 2, 3, 2, -66, -67, 3, 2, 3, 2, -69, -70, -68, -71, -65, -72, 3, 2, 3, 2, -74,
    -75, 3, 2, 3, 2, -77, -78, -76, -79, 3, 2, 3, 2, -81, -82, 3, 2, 3, 2, -84, -85, -83, -86, -80, -87, -73, -88, 3, 2, 3, 2, -90, -91, 3, 2, 1, 3, -93, -94, -92, -95, 1, 1, 1, 1, -97, -98, 1, 1, 1, 1, -100, -101, -99, -102, -96, -103, 1, 1, 1, 1, -105, -106, 1, 1, 1, 1, -108, -109, -107, -110, 1,
    1, 1, 1, -112, -113, 1, 1, 1, 1, -115, -116, -114, -117, -111, -118, -104, -119, -89, -120, -58, -121, 123, 124, 123, 124, 123, -124, -123, -125, -122, -126
]
model_16_64_524288 = [
    0, 1, -1, 2, -2, 3, -3, 4, -4, 5, -5, 6, -6, 7, -7, 8, -8, 9, -9, 10, -10, 11, -11, 12, -12, 13, -13, 14, -14, 15, -15, 16, -16, 17, -17, 18, -18, 19, -19, 20, -20, 21, -21, 22, -22, 23, -23, 24, -24, 25, -25, 26, -26, 27, -27, 28, -28, 29, -29, 30, -30, 31, -31, 32, -32, 33, -33, 34, -34, 35,
    -35, 36, -36, 37, -37, 38, -38, 39, -39, 40, -40, 41, 42, 82, -42, 83, -43, 84, -44, 85, -45, 86, -46, 87, -47, 88, -48, 89, -49, 90, -50, 91, -51, 92, -52, 93, -53, 94, -54, 95, -55, 96, -56, 97, -57, 98, -58, 99, -59, 100, -60, 101, -61, 102, -62, 103, -63, 104, -64, 105, -65, 106, -66, 107,
    -67, 108, -68, 109, -69, 110, -70, 111, -71, 112, -72, 113, -73, 114, -74, 115, -75, 116, -76, 117, -77, 118, -78, 119, -79, 120, -80, 121, -81, 122, -82, 123, -83, 124, -84, 125, -85, 126, -86, 127, -41, -87, 43, 44, -89, 45, -90, 46, -91, 47, -92, 48, -93, 49, -94, 50, -95, 51, -96, 52, -97,
    53, -98, 54, -99, 55, -100, 56, -101, 57, -102, 58, -103, 59, -104, 60, -105, 61, -106, 62, -107, 63, -108, 64, -109, 65, -110, 66, -111, 67, -112, 68, -113, 69, -114, 70, -115, 71, -116, 72, -117, 73, -118, 74, -119, 75, -120, 76, -121, 77, -122, 78, -123, 79, -124, 80, -125, 81, -88, -126
]

ctr = 0


def walk(tree, parentname, index, data):
    global ctr
    lvalue = data[index]
    rvalue = data[index + 1]
    lname = str(lvalue)
    rname = str(rvalue)
    lid = ctr
    ctr += 1
    rid = ctr
    ctr += 1
    tree.create_node(lname, lid, parentname)
    tree.create_node(rname, rid, parentname)
    if lvalue < 0:
        walk(tree, lid, (-lvalue - 1) * 2, data)
    if rvalue < 0:
        walk(tree, rid, (-rvalue - 1) * 2, data)


lupostree = Tree()
root = ctr
ctr += 1
lupostree.create_node("0", root)
walk(lupostree, root, len(luposdate) - 2, luposdate)
lupostree.show()

modeltree = Tree()
root = ctr
ctr += 1
modeltree.create_node("0", root)
walk(modeltree, root, len(model_16_64_524288) - 2, model_16_64_524288)
modeltree.show()

query = [
    -1, 4, 26, -1, 3, -2, -1, 17, -3, -1, 1, -4, -1, 3, -5, -1, 4, 26, -1, 17, -6, -1, 3, -7, -1, 17, -8, -1, 4, 26, -1, 3, -9, -1, 1, -10, -1, 17, -11, -1, 3, -12, -1, 4, 26, -1, 3, -13, -1, 1, -14, -1, 17, -15, -1, 3, -16, -1, 4, 26, -1, 17, -17, -1, 3, -18, -1, 17, -19, -1, 4, 26, -1, 3, -20, -1,
    4, 26, -1, 1, -21, -1, 4, 26, -1, 1, -22, -1, 3, -23, -1, 1, -24, -1, 17, -25, -1, 4, 26, -1, 17, -26, -1, 1, -27, -1, 17, -28, -1, 3, -29, -1, 1, -30, -1, 3, -31, -1, 4, 26, -1, 1, -32, -1, 17, -33, -1, 4, 26, -1, 1, -34, -1, 3, -35, -1, 1, -36, -1, 3, -37, -1, 1, -38, -1, 3, -39, -1, 4, 26,
    -1, 17, -40, -1, 3, -41, -1, 4, 26, -1, 1, -42, -1, 3, -43, -1, 17, -44, -1, 4, 26, -1, 17, -45, -1, 3, -46, -1, 1, -47, -1, 4, 26, -1, 1, -48, -1, 17, -49, -1, 1, -50, -1, 4, 26, -1, 3, -51, -1, 4, 26, -1, 1, -52, -1, 4, 26, -1, 3, -53, -1, 1, -54, -1, 3, -55, -1, 1, -56, -1, 4, 26, -1, 17,
    -57, -1, 3, -58, -1, 4, 26, -1, 1, -59, -1, 3, -60, -1, 17, -61, -1, 1, -62, -1, 17, -63, -1, 4, 26, -1, 17, -64, -1, 1, -65, -1, 17, -66, -1, 1, -67, -1, 17, -68, -1, 1, -69, -1, 17, -70, -1, 1, -71, -1, 17, -72, -1, 3, -73, -1, 4, 26, -1, 1, -74, -1, 17, -75, -1, 3, -76, -1, 4, 26, -1, 17,
    -77, -1, 4, 26, -1, 1, -78, -1, 4, 26, -1, 1, -79, -1, 17, -80, -1, 3, -81, -1, 1, -82, -1, 4, 26, -1, 17, -83, -1, 1, -84, -1, 17, -85, -1, 3, -86, -1, 4, 26, -1, 3, -87, -1, 4, 26, -1, 17, -88, -1, 4, 26, -1, 1, -89, -1, 4, 26, -1, 17, -90, -1, 3, -91, -1, 17, -92, -1, 1, -93, -1, 3, -94, -94,
    11, -95, -94, 4, 12, -94, 11, -96, -94, 4, 12, -94, 11, -97
]
query=[-1,-2,-3,-3,1,-4,-4,-5,-6,-6,1,-7,-7,-8,-9,-9,1,-10,-10,-11,-12,-12,1,-13,-13,-14,-15,-15,1,-16,-16,-17,-18,-18,1,-19,-19,-20,-21,-21,1,-22,-22,-23,-24,-24,1,-25,-25,-26,-27,-27,1,-28,-28,-29,-30,-30,1,-31,-31,-32,-33,-33,1,-34,-34,-35,-36,-36,1,-37,-37,-38,-39,-39,1,-40,-40,-41,-42,-42,1,-43,-43,-44,-45,-45,1,-46,-46,-47,-48,-48,4,6]

rows=[]
row=[]
for q in query:
 row.append(q)
 if len(row)==3:
  rows.append(row)
  row=[]

rows.sort()
print("\n")
for r in rows:
 print(r)

